<div class="alert alert-warning" role="alert" *ngIf="this.UserRankingData.length == 0">
  No está suscrito a ningún ranking.
</div>
<div class="container">
  <div class="big-layout" *ngIf="this.authService.UserData.date != undefined">
    <div class="" style="color: rgb(0, 0, 0)">
      <form class="" [formGroup]="joinForm" (ngSubmit)="onSubmit()">
        <label for="rank_name">Codigo del ranking:</label>
        <input style="width: 230px; margin-right: 10px;" type="number" formControlName="rank_id" />
        <button type="submit" class="btn btn-block btn-primary" style="margin-top: 5%;">
          Unirse al ranking
        </button><br>
      </form>
    </div>
  </div>
  <div class="" *ngIf="this.authService.UserData.date == undefined" style="color: white">
    <form class="form-signin" [formGroup]="createForm" (ngSubmit)="createRanking()">
      <div class="">
        <div class="form-group">
          <label for="rank_name">Nombre del ranking:</label>
          <input type="text" class="form-control" formControlName="rank_name" required>
        </div>
        <br>
        <div class="form-group">
          <label for="description">Descripción:</label>
          <textarea class="form-control" rows="3" formControlName="rank_description" required></textarea>
        </div>
        <br>
        <button type="submit" class="btn btn-block btn-primary" style="margin-top: 5%;">
          Crear Ranking
        </button><br>
      </div>
    </form>
    <br>
    <button class="btn btn-success" (click)="verPeticiones()">Peticiones</button>
    <div class="tabla" *ngIf="this.authService.UserData.date == undefined">
      <table *ngIf="showTable == true" class="table">
        <thead class="thead-dark">
          <tr>
            <th scope="col">Ranking</th>
            <th scope="col">Alumno</th>
            <th scope="col">Aceptar</th>
            <th scope="col">Denegar</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let peticiones of PetitionsData">
            <td>{{peticiones.rank_code}}</td>
            <!-- El ranking al que hace la peticion -->
            <td>{{peticiones.user_id}}</td>
            <!-- Usuario que hace la petición -->
            <td><button class="btn btn-success" (click)="aceptarPeticion()">Aceptar</button></td>
            <td><button class="btn btn-danger" (click)="denegarPeticion()">Denegar</button></td>
          </tr>
        </tbody>
      </table>
      <div class="alert alert-success" role="alert" *ngIf="showAlertAceptada">
        Se ha aceptado una petición.
      </div>
      <div class="alert alert-danger" role="alert" *ngIf="showAlert">
        Se ha eliminado una petición.
      </div>
      <div class="alert alert-info" role="alert" *ngIf="showAlertErrorAceptada">
        Ha ocurrido un error y la petición no se ha aceptado.
      </div>
      <div class="alert alert-info" role="alert" *ngIf="showAlertError">
        Ha ocurrido un error y la petición no se ha eliminado.
      </div>
    </div>
  </div>
</div>

<div class="layout" *ngFor="let ranking of UserRankingData; let i = index">
  <table class="table " style="color: rgb(255, 255, 255)" *ngIf="i < 1">
    <thead>
      <tr>
        <th scope="col"></th>
        <th scope="col">Codigo</th>
        <th scope="col">Nombre</th>
        <th scope="col">Points</th>
        <th scope="col">Acceder</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let rank of RankingData" style="color:white;" scope="row">
        <td *ngIf="this.rank.id != 0"></td>
        <td *ngIf="this.rank.id != 0">{{rank.id}}</td>
        <td *ngIf="this.rank.id != 0">{{rank.rank_name}}</td>
        <td *ngIf="this.rank.id != 0">{{ranking.points}}</td>
        <td *ngIf="this.rank.id != 0"><button (click)="clickRanking(this.rank)" type="button" class="btn btn-warning">Entrar</button></td>
      </tr>
    </tbody>
  </table>
</div>
